---
phase: 03-seo-implementation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app/layout.tsx
  - src/app/page.tsx
  - src/app/services/page.tsx
  - src/app/about/page.tsx
  - src/app/contact/page.tsx
  - src/app/sitemap.ts
  - src/app/robots.ts
autonomous: true

must_haves:
  truths:
    - "Homepage title is 50-60 chars and includes brand name"
    - "Each page has unique meta description of 150-160 chars"
    - "Each page has canonical tag pointing to its URL"
    - "Open Graph tags render in HTML head for all pages"
    - "Twitter Card tags render in HTML head for all pages"
    - "sitemap.xml lists all 4 pages with correct URLs"
    - "robots.txt allows all crawlers and references sitemap"
  artifacts:
    - path: "src/app/layout.tsx"
      provides: "Base metadata with metadataBase, title template, default OG/Twitter"
      contains: "metadataBase"
    - path: "src/app/sitemap.ts"
      provides: "Sitemap generation for static export"
      contains: "force-static"
    - path: "src/app/robots.ts"
      provides: "Robots.txt generation for static export"
      contains: "force-static"
  key_links:
    - from: "src/app/*/page.tsx"
      to: "layout.tsx metadataBase"
      via: "Metadata API merging"
      pattern: "alternates.*canonical"
---

<objective>
Implement comprehensive meta tags, sitemap, and robots.txt using Next.js Metadata API

Purpose: Search engines and social platforms need proper meta tags to understand and display the site correctly
Output: All pages have unique titles, descriptions, canonical URLs, Open Graph, and Twitter Card tags. Sitemap and robots.txt are generated for crawlers.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-seo-implementation/03-RESEARCH.md

# Current page files
@src/app/layout.tsx
@src/app/page.tsx
@src/app/services/page.tsx
@src/app/about/page.tsx
@src/app/contact/page.tsx
@next.config.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Configure root layout base metadata</name>
  <files>src/app/layout.tsx</files>
  <action>
Update the root layout.tsx metadata export to include:

1. `metadataBase: new URL('https://madmedia.social')` - Required for resolving relative URLs
2. Title with template: `title: { template: '%s | MadMedia', default: 'MadMedia - Social Media Management & Website Services' }`
3. Default description (keep existing, ensure 150-160 chars)
4. Default Open Graph settings:
   ```typescript
   openGraph: {
     type: 'website',
     locale: 'en_US',
     siteName: 'MadMedia',
   }
   ```
5. Default Twitter Card settings:
   ```typescript
   twitter: {
     card: 'summary_large_image',
   }
   ```

Do NOT add per-page metadata here - that goes in individual page files.
Keep all existing imports and component structure unchanged.
  </action>
  <verify>Run `npm run build` - should complete without errors. Check generated HTML files in `out/` folder have proper meta tags in head.</verify>
  <done>Root layout exports Metadata with metadataBase, title template, and default OG/Twitter settings</done>
</task>

<task type="auto">
  <name>Task 2: Add per-page metadata exports</name>
  <files>src/app/page.tsx, src/app/services/page.tsx, src/app/about/page.tsx, src/app/contact/page.tsx</files>
  <action>
Add `export const metadata: Metadata` to each page file with page-specific SEO tags.

**Homepage (src/app/page.tsx):**
```typescript
import type { Metadata } from 'next'

export const metadata: Metadata = {
  // Uses default title from layout (no override needed for homepage)
  alternates: {
    canonical: '/',
  },
  openGraph: {
    title: 'MadMedia - Social Media Management & Website Services',
    description: 'Professional social media management and website services for small businesses in Minnesota and beyond.',
    url: '/',
  },
}
```

**Services (src/app/services/page.tsx):**
- title: 'Services' (becomes 'Services | MadMedia' via template)
- description: 'Social media management packages starting at $300/month. Website design and maintenance services. Starter, Standard, and Premium options available.' (157 chars)
- canonical: '/services/'
- OG title, description, url matching

**About (src/app/about/page.tsx):**
- title: 'About'
- description: 'Meet Julie Asfeld, founder of MadMedia. Bringing warmth and strategy to social media management and website services for small businesses.' (147 chars)
- canonical: '/about/'
- OG title, description, url matching

**Contact (src/app/contact/page.tsx):**
- title: 'Contact'
- description: 'Get in touch with MadMedia for social media management and website services. Email, phone, or use our contact form to start growing your business.' (153 chars)
- canonical: '/contact/'
- OG title, description, url matching

Important: Use trailing slashes in canonical/OG URLs to match `trailingSlash: true` in next.config.js.
  </action>
  <verify>Run `npm run build`. Check each HTML file in `out/` folder: `out/index.html`, `out/services/index.html`, `out/about/index.html`, `out/contact/index.html`. Each should have unique title and description meta tags.</verify>
  <done>All 4 pages have unique metadata exports with title, description, canonical, and OG tags</done>
</task>

<task type="auto">
  <name>Task 3: Create sitemap.ts and robots.ts</name>
  <files>src/app/sitemap.ts, src/app/robots.ts</files>
  <action>
Create both files with `export const dynamic = 'force-static'` for static export compatibility (see RESEARCH.md Pitfall 1).

**src/app/sitemap.ts:**
```typescript
import type { MetadataRoute } from 'next'

export const dynamic = 'force-static'

export default function sitemap(): MetadataRoute.Sitemap {
  const baseUrl = 'https://madmedia.social'

  return [
    {
      url: baseUrl,
      lastModified: new Date(),
      changeFrequency: 'monthly',
      priority: 1,
    },
    {
      url: `${baseUrl}/services/`,
      lastModified: new Date(),
      changeFrequency: 'monthly',
      priority: 0.8,
    },
    {
      url: `${baseUrl}/about/`,
      lastModified: new Date(),
      changeFrequency: 'monthly',
      priority: 0.7,
    },
    {
      url: `${baseUrl}/contact/`,
      lastModified: new Date(),
      changeFrequency: 'monthly',
      priority: 0.7,
    },
  ]
}
```

**src/app/robots.ts:**
```typescript
import type { MetadataRoute } from 'next'

export const dynamic = 'force-static'

export default function robots(): MetadataRoute.Robots {
  return {
    rules: {
      userAgent: '*',
      allow: '/',
    },
    sitemap: 'https://madmedia.social/sitemap.xml',
  }
}
```

Use trailing slashes on page URLs to match next.config.js setting.
  </action>
  <verify>Run `npm run build`. Check `out/sitemap.xml` exists and contains all 4 URLs. Check `out/robots.txt` exists and references the sitemap.</verify>
  <done>sitemap.xml and robots.txt are generated during build with all pages listed</done>
</task>

</tasks>

<verification>
After all tasks complete:
1. `npm run build` succeeds without errors
2. `out/index.html` contains: title, description, og:title, og:description, og:url, twitter:card meta tags
3. `out/services/index.html` has unique title "Services | MadMedia" and unique description
4. `out/about/index.html` has unique title "About | MadMedia" and unique description
5. `out/contact/index.html` has unique title "Contact | MadMedia" and unique description
6. `out/sitemap.xml` lists all 4 pages with proper URLs
7. `out/robots.txt` allows crawling and references sitemap.xml
</verification>

<success_criteria>
- Each page has unique title (50-60 chars) using title template
- Each page has unique meta description (150-160 chars)
- Each page has canonical tag with trailing slash
- Open Graph and Twitter Card tags render for all pages
- sitemap.xml includes all 4 pages with madmedia.social domain
- robots.txt allows all crawlers and references sitemap
- Build completes without errors
</success_criteria>

<output>
After completion, create `.planning/phases/03-seo-implementation/03-01-SUMMARY.md`
</output>
